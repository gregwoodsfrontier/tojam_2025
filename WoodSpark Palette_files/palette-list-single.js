var xhttp=null;function paletteAjax(e,t){xhttp&&xhttp.abort(),(xhttp=new XMLHttpRequest).onreadystatechange=function(){4==this.readyState&&200==this.status&&(this.responseText.error?alert(this.responseText.errorMessage):t(JSON.parse(this.response)),xhttp=null)},xhttp.open("GET",e,!0),xhttp.send()}document.addEventListener("click",function(e){var t,a,n;"download-link"==(t="path"==e.target.tagName?e.target.parentElement.parentElement:"svg"==e.target.tagName?e.target.parentElement:e.target).className?(a=t.id.replace("download-",""),n=document.getElementsByClassName("palette-name")[0].innerHTML.slice(0,-8),paletteAjax("/palette-list/dl?p="+document.getElementsByClassName("palette-info")[0].dataset.pid,function(e){var t;"success"==e&&(t=+(e=document.getElementsByClassName("download-count")[0]).innerHTML+1,e.innerHTML=t)}),ga("send","event","Palette List Download",a,n)):t.classList.contains("db-analysis")?(e.preventDefault(),popup("DawnBringer Palette Analysis",'<img src="'+t.href+'" /><br /><p>Created with the <a href="/palettes/dawnbringer-palette-analyser">DawnBringer Palette Analyser</a></p>'),document.querySelector("#popup-reusable .content").style.width="650px"):t.classList.contains("censor-analysis")?(e.preventDefault(),popup("Censor Palette Analysis",'<img src="'+t.href+'" /><br /><p>Created with the <a href="/palettes/censor-palette-analyser">Censor Palette Analyser</a></p>'),document.querySelector("#popup-reusable .content").style.width="650px"):t.classList.contains("dither-test-button")&&(e.preventDefault(),document.querySelector(".popup.dither-test").show())});